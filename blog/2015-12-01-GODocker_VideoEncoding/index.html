<!DOCTYPE html><html lang="en"><head><meta name="generator" content="Scully 1.1.0">
        <meta charset="utf-8">
        <title>Olivier Barais, PhD</title>
        <base href="/">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <style type="text/css">svg:not(:root).svg-inline--fa {
  overflow: visible;
}

.svg-inline--fa {
  display: inline-block;
  font-size: inherit;
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.225em;
}
.svg-inline--fa.fa-w-1 {
  width: 0.0625em;
}
.svg-inline--fa.fa-w-2 {
  width: 0.125em;
}
.svg-inline--fa.fa-w-3 {
  width: 0.1875em;
}
.svg-inline--fa.fa-w-4 {
  width: 0.25em;
}
.svg-inline--fa.fa-w-5 {
  width: 0.3125em;
}
.svg-inline--fa.fa-w-6 {
  width: 0.375em;
}
.svg-inline--fa.fa-w-7 {
  width: 0.4375em;
}
.svg-inline--fa.fa-w-8 {
  width: 0.5em;
}
.svg-inline--fa.fa-w-9 {
  width: 0.5625em;
}
.svg-inline--fa.fa-w-10 {
  width: 0.625em;
}
.svg-inline--fa.fa-w-11 {
  width: 0.6875em;
}
.svg-inline--fa.fa-w-12 {
  width: 0.75em;
}
.svg-inline--fa.fa-w-13 {
  width: 0.8125em;
}
.svg-inline--fa.fa-w-14 {
  width: 0.875em;
}
.svg-inline--fa.fa-w-15 {
  width: 0.9375em;
}
.svg-inline--fa.fa-w-16 {
  width: 1em;
}
.svg-inline--fa.fa-w-17 {
  width: 1.0625em;
}
.svg-inline--fa.fa-w-18 {
  width: 1.125em;
}
.svg-inline--fa.fa-w-19 {
  width: 1.1875em;
}
.svg-inline--fa.fa-w-20 {
  width: 1.25em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: 0.3em;
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: 0.3em;
  width: auto;
}
.svg-inline--fa.fa-border {
  height: 1.5em;
}
.svg-inline--fa.fa-li {
  width: 2em;
}
.svg-inline--fa.fa-fw {
  width: 1.25em;
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter {
  background-color: #ff253a;
  border-radius: 1em;
  -webkit-box-sizing: border-box;
          box-sizing: border-box;
  color: #fff;
  height: 1.5em;
  line-height: 1;
  max-width: 5em;
  min-width: 1.5em;
  overflow: hidden;
  padding: 0.25em;
  right: 0;
  text-overflow: ellipsis;
  top: 0;
  -webkit-transform: scale(0.25);
          transform: scale(0.25);
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: 0;
  right: 0;
  top: auto;
  -webkit-transform: scale(0.25);
          transform: scale(0.25);
  -webkit-transform-origin: bottom right;
          transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: 0;
  left: 0;
  right: auto;
  top: auto;
  -webkit-transform: scale(0.25);
          transform: scale(0.25);
  -webkit-transform-origin: bottom left;
          transform-origin: bottom left;
}

.fa-layers-top-right {
  right: 0;
  top: 0;
  -webkit-transform: scale(0.25);
          transform: scale(0.25);
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-top-left {
  left: 0;
  right: auto;
  top: 0;
  -webkit-transform: scale(0.25);
          transform: scale(0.25);
  -webkit-transform-origin: top left;
          transform-origin: top left;
}

.fa-lg {
  font-size: 1.3333333333em;
  line-height: 0.75em;
  vertical-align: -0.0667em;
}

.fa-xs {
  font-size: 0.75em;
}

.fa-sm {
  font-size: 0.875em;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: 2.5em;
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: -2em;
  position: absolute;
  text-align: center;
  width: 2em;
  line-height: inherit;
}

.fa-border {
  border: solid 0.08em #eee;
  border-radius: 0.1em;
  padding: 0.2em 0.25em 0.15em;
}

.fa-pull-left {
  float: left;
}

.fa-pull-right {
  float: right;
}

.fa.fa-pull-left,
.fas.fa-pull-left,
.far.fa-pull-left,
.fal.fa-pull-left,
.fab.fa-pull-left {
  margin-right: 0.3em;
}
.fa.fa-pull-right,
.fas.fa-pull-right,
.far.fa-pull-right,
.fal.fa-pull-right,
.fab.fa-pull-right {
  margin-left: 0.3em;
}

.fa-spin {
  -webkit-animation: fa-spin 2s infinite linear;
          animation: fa-spin 2s infinite linear;
}

.fa-pulse {
  -webkit-animation: fa-spin 1s infinite steps(8);
          animation: fa-spin 1s infinite steps(8);
}

@-webkit-keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}

@keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=1)";
  -webkit-transform: rotate(90deg);
          transform: rotate(90deg);
}

.fa-rotate-180 {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2)";
  -webkit-transform: rotate(180deg);
          transform: rotate(180deg);
}

.fa-rotate-270 {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=3)";
  -webkit-transform: rotate(270deg);
          transform: rotate(270deg);
}

.fa-flip-horizontal {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1)";
  -webkit-transform: scale(-1, 1);
          transform: scale(-1, 1);
}

.fa-flip-vertical {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";
  -webkit-transform: scale(1, -1);
          transform: scale(1, -1);
}

.fa-flip-both, .fa-flip-horizontal.fa-flip-vertical {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";
  -webkit-transform: scale(-1, -1);
          transform: scale(-1, -1);
}

:root .fa-rotate-90,
:root .fa-rotate-180,
:root .fa-rotate-270,
:root .fa-flip-horizontal,
:root .fa-flip-vertical,
:root .fa-flip-both {
  -webkit-filter: none;
          filter: none;
}

.fa-stack {
  display: inline-block;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: #fff;
}

.sr-only {
  border: 0;
  clip: rect(0, 0, 0, 0);
  height: 1px;
  margin: -1px;
  overflow: hidden;
  padding: 0;
  position: absolute;
  width: 1px;
}

.sr-only-focusable:active, .sr-only-focusable:focus {
  clip: auto;
  height: auto;
  margin: 0;
  overflow: visible;
  position: static;
  width: auto;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: 1;
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: 0.4;
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: 0.4;
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: 1;
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse {
  color: #fff;
}</style><link rel="icon" type="image/x-icon" href="favicon.png">
        <style type="text/css">@font-face{font-family:'Open Sans';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v18/mem5YaGs126MiZpBA-UN_r8OUuhv.woff) format('woff');}@font-face{font-family:'Open Sans';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v18/mem8YaGs126MiZpBA-UFVZ0d.woff) format('woff');}@font-face{font-family:'Open Sans';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v18/mem5YaGs126MiZpBA-UN7rgOUuhv.woff) format('woff');}@font-face{font-family:'Open Sans';font-style:normal;font-weight:800;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v18/mem5YaGs126MiZpBA-UN8rsOUuhv.woff) format('woff');}@font-face{font-family:'Open Sans';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v18/mem5YaGs126MiZpBA-UN_r8OX-hpKKSTj5PW.woff2) format('woff2');unicode-range:U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;}@font-face{font-family:'Open Sans';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v18/mem5YaGs126MiZpBA-UN_r8OVuhpKKSTj5PW.woff2) format('woff2');unicode-range:U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;}@font-face{font-family:'Open Sans';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v18/mem5YaGs126MiZpBA-UN_r8OXuhpKKSTj5PW.woff2) format('woff2');unicode-range:U+1F00-1FFF;}@font-face{font-family:'Open Sans';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v18/mem5YaGs126MiZpBA-UN_r8OUehpKKSTj5PW.woff2) format('woff2');unicode-range:U+0370-03FF;}@font-face{font-family:'Open Sans';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v18/mem5YaGs126MiZpBA-UN_r8OXehpKKSTj5PW.woff2) format('woff2');unicode-range:U+0102-0103, U+0110-0111, U+0128-0129, U+0168-0169, U+01A0-01A1, U+01AF-01B0, U+1EA0-1EF9, U+20AB;}@font-face{font-family:'Open Sans';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v18/mem5YaGs126MiZpBA-UN_r8OXOhpKKSTj5PW.woff2) format('woff2');unicode-range:U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;}@font-face{font-family:'Open Sans';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v18/mem5YaGs126MiZpBA-UN_r8OUuhpKKSTjw.woff2) format('woff2');unicode-range:U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;}@font-face{font-family:'Open Sans';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v18/mem8YaGs126MiZpBA-UFWJ0bf8pkAp6a.woff2) format('woff2');unicode-range:U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;}@font-face{font-family:'Open Sans';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v18/mem8YaGs126MiZpBA-UFUZ0bf8pkAp6a.woff2) format('woff2');unicode-range:U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;}@font-face{font-family:'Open Sans';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v18/mem8YaGs126MiZpBA-UFWZ0bf8pkAp6a.woff2) format('woff2');unicode-range:U+1F00-1FFF;}@font-face{font-family:'Open Sans';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v18/mem8YaGs126MiZpBA-UFVp0bf8pkAp6a.woff2) format('woff2');unicode-range:U+0370-03FF;}@font-face{font-family:'Open Sans';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v18/mem8YaGs126MiZpBA-UFWp0bf8pkAp6a.woff2) format('woff2');unicode-range:U+0102-0103, U+0110-0111, U+0128-0129, U+0168-0169, U+01A0-01A1, U+01AF-01B0, U+1EA0-1EF9, U+20AB;}@font-face{font-family:'Open Sans';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v18/mem8YaGs126MiZpBA-UFW50bf8pkAp6a.woff2) format('woff2');unicode-range:U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;}@font-face{font-family:'Open Sans';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v18/mem8YaGs126MiZpBA-UFVZ0bf8pkAg.woff2) format('woff2');unicode-range:U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;}@font-face{font-family:'Open Sans';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v18/mem5YaGs126MiZpBA-UN7rgOX-hpKKSTj5PW.woff2) format('woff2');unicode-range:U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;}@font-face{font-family:'Open Sans';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v18/mem5YaGs126MiZpBA-UN7rgOVuhpKKSTj5PW.woff2) format('woff2');unicode-range:U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;}@font-face{font-family:'Open Sans';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v18/mem5YaGs126MiZpBA-UN7rgOXuhpKKSTj5PW.woff2) format('woff2');unicode-range:U+1F00-1FFF;}@font-face{font-family:'Open Sans';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v18/mem5YaGs126MiZpBA-UN7rgOUehpKKSTj5PW.woff2) format('woff2');unicode-range:U+0370-03FF;}@font-face{font-family:'Open Sans';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v18/mem5YaGs126MiZpBA-UN7rgOXehpKKSTj5PW.woff2) format('woff2');unicode-range:U+0102-0103, U+0110-0111, U+0128-0129, U+0168-0169, U+01A0-01A1, U+01AF-01B0, U+1EA0-1EF9, U+20AB;}@font-face{font-family:'Open Sans';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v18/mem5YaGs126MiZpBA-UN7rgOXOhpKKSTj5PW.woff2) format('woff2');unicode-range:U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;}@font-face{font-family:'Open Sans';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v18/mem5YaGs126MiZpBA-UN7rgOUuhpKKSTjw.woff2) format('woff2');unicode-range:U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;}@font-face{font-family:'Open Sans';font-style:normal;font-weight:800;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v18/mem5YaGs126MiZpBA-UN8rsOX-hpKKSTj5PW.woff2) format('woff2');unicode-range:U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;}@font-face{font-family:'Open Sans';font-style:normal;font-weight:800;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v18/mem5YaGs126MiZpBA-UN8rsOVuhpKKSTj5PW.woff2) format('woff2');unicode-range:U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;}@font-face{font-family:'Open Sans';font-style:normal;font-weight:800;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v18/mem5YaGs126MiZpBA-UN8rsOXuhpKKSTj5PW.woff2) format('woff2');unicode-range:U+1F00-1FFF;}@font-face{font-family:'Open Sans';font-style:normal;font-weight:800;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v18/mem5YaGs126MiZpBA-UN8rsOUehpKKSTj5PW.woff2) format('woff2');unicode-range:U+0370-03FF;}@font-face{font-family:'Open Sans';font-style:normal;font-weight:800;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v18/mem5YaGs126MiZpBA-UN8rsOXehpKKSTj5PW.woff2) format('woff2');unicode-range:U+0102-0103, U+0110-0111, U+0128-0129, U+0168-0169, U+01A0-01A1, U+01AF-01B0, U+1EA0-1EF9, U+20AB;}@font-face{font-family:'Open Sans';font-style:normal;font-weight:800;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v18/mem5YaGs126MiZpBA-UN8rsOXOhpKKSTj5PW.woff2) format('woff2');unicode-range:U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;}@font-face{font-family:'Open Sans';font-style:normal;font-weight:800;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v18/mem5YaGs126MiZpBA-UN8rsOUuhpKKSTjw.woff2) format('woff2');unicode-range:U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;}</style>
    <link rel="stylesheet" href="styles.14cbacba865e2937a732.css"><style></style><script charset="utf-8" src="1-es2015.95fa508b71239ec0ee55.js"></script><script charset="utf-8" src="2-es2015.1a6085eb79796978821c.js"></script><style>
      :host {
        display: none;
      }
      scully-content {
        display: none;
      }
    </style><style>[_nghost-toa-c33]   fa-icon[_ngcontent-toa-c33]{font-size:20px;vertical-align:text-top}[_nghost-toa-c33]   a.icon[_ngcontent-toa-c33]{padding:0 10px!important}</style><script>window['ScullyIO']='generated';</script></head>
    <body scully-version="1.1.0">
        <app-root _nghost-toa-c38="" ng-version="11.0.1"><router-outlet _ngcontent-toa-c38=""></router-outlet><sb-teaching _nghost-toa-c45=""><sb-layout-blog _ngcontent-toa-c45="" _nghost-toa-c36=""><sb-top-nav _ngcontent-toa-c36="" _nghost-toa-c33=""><nav _ngcontent-toa-c33="" id="mainNav" class="navbar navbar-expand-lg navbar-light fixed-top"><div _ngcontent-toa-c33="" class="container"><a _ngcontent-toa-c33="" routerlink="/" class="navbar-brand" href="/">Olivier Barais</a><button _ngcontent-toa-c33="" type="button" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation" class="navbar-toggler navbar-toggler-right"><fa-icon _ngcontent-toa-c33="" class="ng-fa-icon ml-1"><svg role="img" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="bars" class="svg-inline--fa fa-bars fa-w-14" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"></path></svg></fa-icon></button><div _ngcontent-toa-c33="" class="navbar-collapse collapse" style=""><ul _ngcontent-toa-c33="" class="navbar-nav ml-auto"><li _ngcontent-toa-c33="" class="nav-item"><a _ngcontent-toa-c33="" routerlink="/" class="nav-link" href="/">Home</a></li><li _ngcontent-toa-c33="" class="nav-item"><a _ngcontent-toa-c33="" routerlink="/publications" class="nav-link" href="/publications">Publications</a></li><li _ngcontent-toa-c33="" class="nav-item"><a _ngcontent-toa-c33="" routerlink="/teaching" class="nav-link" href="/teaching">Teaching</a></li><li _ngcontent-toa-c33="" class="nav-item"><a _ngcontent-toa-c33="" routerlink="/static/research" class="nav-link" href="/static/research">Research</a></li><li _ngcontent-toa-c33="" class="nav-item"><a _ngcontent-toa-c33="" routerlink="/blog" class="nav-link" href="/blog">Blog</a></li><li _ngcontent-toa-c33="" class="nav-item"><a _ngcontent-toa-c33="" routerlink="/about" class="nav-link" href="/about">Contact</a></li><li _ngcontent-toa-c33="" class="nav-item"><a _ngcontent-toa-c33="" href="https://github.com/StartBootstrap/mulder" target="_blank" class="nav-link icon"><fa-icon _ngcontent-toa-c33="" class="ng-fa-icon"><svg role="img" aria-hidden="true" focusable="false" data-prefix="fab" data-icon="github" class="svg-inline--fa fa-github fa-w-16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg></fa-icon></a></li></ul></div></div></nav></sb-top-nav><sb-clean-blog-header _ngcontent-toa-c45="" _nghost-toa-c40=""><header _ngcontent-toa-c40="" class="masthead" style="background-image: url(&quot;assets/img/home-bg.jpg&quot;);"><div _ngcontent-toa-c40="" class="overlay"></div><div _ngcontent-toa-c40="" class="container"><div _ngcontent-toa-c40="" class="row"><div _ngcontent-toa-c40="" class="col-lg-8 col-md-10 mx-auto"><div _ngcontent-toa-c40="" class="post-heading"><h1 _ngcontent-toa-c40="">Using Go-Docker and Docker Swarm to create a  high-volume live and on demand video encoding solutions</h1><h2 _ngcontent-toa-c40="" class="subheading"></h2><span _ngcontent-toa-c40="" class="meta"></span></div><!----></div></div></div></header><!----></sb-clean-blog-header><article _ngcontent-toa-c45=""><div _ngcontent-toa-c45="" class="container"><div _ngcontent-toa-c45="" class="row"><div _ngcontent-toa-c45="" class="col-lg-12 col-md-12 mx-auto"><!--scullyContent-begin--><p _ngcontent-toa-c45="">The idea is to propose an initial solution to securely manages high-volume live and on demand video encoding solutions in
combination with the scale and elasticity of the cloud. The providing service will automatically provisions and dynamically scales docker instances, and can seamlessly integrate those resources with on site infrastructure to instantly expand video processing capacity. This flexibility enables video providers to rapidly enhance multiscreen video offerings, grow audiences, generate greater revenues, and decrease capital expenses.</p>
<!--more-->

<p _ngcontent-toa-c45="">In this example, we will build an initial proof of concept for video encoding using <a href="http://www.genouest.org/godocker/" _ngcontent-toa-c45="">go-docker</a>, <a href="https://docs.docker.com/swarm/" _ngcontent-toa-c45="">docker swarm</a>, <a href="https://github.com/google/cadvisor" _ngcontent-toa-c45="">cAdvisor</a>, <a href="http://grafana.org/" _ngcontent-toa-c45="">grafana</a> and <a href="https://influxdb.com/" _ngcontent-toa-c45="">influxDB</a>. </p>
<p _ngcontent-toa-c45="">#Step 1: Docker swarm installation</p>
<p _ngcontent-toa-c45="">You can follow this tutorial
<a href="https://docs.docker.com/swarm/install-manual/" _ngcontent-toa-c45="">docker swarm installation</a></p>
<p _ngcontent-toa-c45="">To summary</p>
<pre class="language-bash" _ngcontent-toa-c45=""><code class="language-bash" _ngcontent-toa-c45="">docker pull swarm
docker run --rm swarm create
<span class="token operator" _ngcontent-toa-c45="">&gt;</span> 7c99516aee4662826684dde48f60361f
<span class="token comment" _ngcontent-toa-c45="">#get the id. Replace in the next commands</span></code></pre><p _ngcontent-toa-c45="">Next join the swarm (replace the token in the following commands):</p>
<pre class="language-bash" _ngcontent-toa-c45=""><code class="language-bash" _ngcontent-toa-c45="">docker run -d swarm <span class="token function" _ngcontent-toa-c45="">join</span> --addr<span class="token operator" _ngcontent-toa-c45="">=</span><span class="token number" _ngcontent-toa-c45="">172.17</span>.0.1:2375 token://7c99516aee4662826684dde48f60361f</code></pre><p _ngcontent-toa-c45="">Finally launch the manager</p>
<pre class="language-bash" _ngcontent-toa-c45=""><code class="language-bash" _ngcontent-toa-c45="">docker run -d -p <span class="token number" _ngcontent-toa-c45="">2378</span>:2375 swarm manage token://7c99516aee4662826684dde48f60361f</code></pre><p _ngcontent-toa-c45="">check it works. </p>
<pre class="language-bash" _ngcontent-toa-c45=""><code class="language-bash" _ngcontent-toa-c45="">docker -H tcp://localhost:2378 info</code></pre><p _ngcontent-toa-c45="">You should get something like that</p>
<pre class="language-bash" _ngcontent-toa-c45=""><code class="language-bash" _ngcontent-toa-c45=""><span class="token number" _ngcontent-toa-c45="">78</span> info
Containers: <span class="token number" _ngcontent-toa-c45="">104</span>
Images: <span class="token number" _ngcontent-toa-c45="">37</span>
Role: primary
Strategy: spread
Filters: health, port, dependency, affinity, constraint
Nodes: <span class="token number" _ngcontent-toa-c45="">1</span>
 head-demo: <span class="token number" _ngcontent-toa-c45="">172.17</span>.0.1:2375
  └ Containers: <span class="token number" _ngcontent-toa-c45="">104</span>
  └ Reserved CPUs: <span class="token number" _ngcontent-toa-c45="">4</span> / <span class="token number" _ngcontent-toa-c45="">4</span>
  └ Reserved Memory: <span class="token number" _ngcontent-toa-c45="">4</span> GiB / <span class="token number" _ngcontent-toa-c45="">16.35</span> GiB
  └ Labels: <span class="token assign-left variable" _ngcontent-toa-c45="">executiondriver</span><span class="token operator" _ngcontent-toa-c45="">=</span>native-0.2, <span class="token assign-left variable" _ngcontent-toa-c45="">kernelversion</span><span class="token operator" _ngcontent-toa-c45="">=</span><span class="token number" _ngcontent-toa-c45="">4.2</span>.0-18-generic, <span class="token assign-left variable" _ngcontent-toa-c45="">operatingsystem</span><span class="token operator" _ngcontent-toa-c45="">=</span>Ubuntu <span class="token number" _ngcontent-toa-c45="">15.10</span>, <span class="token assign-left variable" _ngcontent-toa-c45="">storagedriver</span><span class="token operator" _ngcontent-toa-c45="">=</span>overlay
CPUs: <span class="token number" _ngcontent-toa-c45="">4</span>
Total Memory: <span class="token number" _ngcontent-toa-c45="">16.35</span> GiB
Name: 0a478e14e47e</code></pre><p _ngcontent-toa-c45="">#Step 2 Install go-docker</p>
<p _ngcontent-toa-c45="">##Requirements</p>
<p _ngcontent-toa-c45="">Mongodb and Redis are required. Either install them on a server, or get them in containers:</p>
<p _ngcontent-toa-c45="">Run god-mongo god-redis. </p>
<pre class="language-bash" _ngcontent-toa-c45=""><code class="language-bash" _ngcontent-toa-c45="">docker <span class="token function" _ngcontent-toa-c45="">rm</span> god-mongo god-redis god-web
docker -H localhost:2378  run --name god-mongo -d mongo
docker -H localhost:2378  run --name god-redis -d redis</code></pre><h2 id="running-components" _ngcontent-toa-c45="">Running components</h2>
<p _ngcontent-toa-c45="">Run the web server, interface is reachable at <a href="http://localhost:6543" _ngcontent-toa-c45="">http://localhost:6543</a></p>
<p _ngcontent-toa-c45="">Get the following config file</p>
<ul _ngcontent-toa-c45="">
<li _ngcontent-toa-c45=""><a href="../../../docs/godocker/go-d.ini" _ngcontent-toa-c45="">go-d.ini</a></li>
<li _ngcontent-toa-c45=""><a href="../../../docs/godocker/production.ini" _ngcontent-toa-c45="">production.ini</a></li>
</ul>
<p _ngcontent-toa-c45="">Warning: data shared directory (here /opt/godshared) must match
on host AND container as final job will end in a host container needing the same volume directory.
shared_dir parameter in go-d.ini configuration file must be changed accordingly.</p>
<pre class="language-bash" _ngcontent-toa-c45=""><code class="language-bash" _ngcontent-toa-c45=""><span class="token function" _ngcontent-toa-c45="">mkdir</span> /opt/godshared
<span class="token function" _ngcontent-toa-c45="">mkdir</span> /tmp/vid</code></pre><pre class="language-bash" _ngcontent-toa-c45=""><code class="language-bash" _ngcontent-toa-c45="">docker -H localhost:2378  run <span class="token punctuation" _ngcontent-toa-c45="">\</span>
  --rm <span class="token punctuation" _ngcontent-toa-c45="">\</span>
  --name god-web
  --link god-mongo:god-mongo  <span class="token punctuation" _ngcontent-toa-c45="">\</span>
  --link god-redis:god-redis  <span class="token punctuation" _ngcontent-toa-c45="">\</span>
  -v /opt/godshared:/opt/godshared <span class="token punctuation" _ngcontent-toa-c45="">\</span>
  -v path_to/go-d.ini:/opt/go-docker/go-d.ini <span class="token punctuation" _ngcontent-toa-c45="">\</span>
  -v path_to/production.ini:/opt/go-docker-web/production.ini <span class="token punctuation" _ngcontent-toa-c45="">\</span>
  -p <span class="token number" _ngcontent-toa-c45="">6543</span>:6543 <span class="token punctuation" _ngcontent-toa-c45="">\</span>
  -e <span class="token string" _ngcontent-toa-c45="">"PYRAMID_ENV=prod"</span> <span class="token punctuation" _ngcontent-toa-c45="">\</span>
  osallou/go-docker <span class="token punctuation" _ngcontent-toa-c45="">\</span>
  gunicorn -p godweb.pid --log-config<span class="token operator" _ngcontent-toa-c45="">=</span>/opt/go-docker-web/production.ini --paste /opt/go-docker-web/production.ini</code></pre><p _ngcontent-toa-c45="">The first time only, you must initialize db etc...</p>
<pre class="language-bash" _ngcontent-toa-c45=""><code class="language-bash" _ngcontent-toa-c45="">docker -H localhost:2378 run <span class="token punctuation" _ngcontent-toa-c45="">\</span>
--link god-mongo:god-mongo <span class="token punctuation" _ngcontent-toa-c45="">\</span>
--link god-redis:god-redis <span class="token punctuation" _ngcontent-toa-c45="">\</span>
-v /opt/godshared:/opt/godshared <span class="token punctuation" _ngcontent-toa-c45="">\</span>
-v path_to/go-d.ini:/opt/go-docker/go-d.ini <span class="token punctuation" _ngcontent-toa-c45="">\</span>
 --rm <span class="token punctuation" _ngcontent-toa-c45="">\</span>
 osallou/go-docker <span class="token punctuation" _ngcontent-toa-c45="">\</span>
 /usr/bin/python go-d-scheduler.py init</code></pre><p _ngcontent-toa-c45="">Run one scheduler</p>
<pre class="language-bash" _ngcontent-toa-c45=""><code class="language-bash" _ngcontent-toa-c45="">docker -H  localhost:2378 run <span class="token punctuation" _ngcontent-toa-c45="">\</span>
  --rm <span class="token punctuation" _ngcontent-toa-c45="">\</span>
  --link god-mongo:god-mongo  <span class="token punctuation" _ngcontent-toa-c45="">\</span>
  --link god-redis:god-redis  <span class="token punctuation" _ngcontent-toa-c45="">\</span>
  --link god-web:god-web <span class="token punctuation" _ngcontent-toa-c45="">\</span>
  -v /opt/godshared:/opt/godshared <span class="token punctuation" _ngcontent-toa-c45="">\</span>
  -v path_to/go-d.ini:/opt/go-docker/go-d.ini <span class="token punctuation" _ngcontent-toa-c45="">\</span>
  osallou/go-docker <span class="token punctuation" _ngcontent-toa-c45="">\</span>
  /usr/bin/python go-d-scheduler.py run</code></pre><p _ngcontent-toa-c45="">Run one or many watchers (1 is enough test or medium size production)</p>
<pre class="language-bash" _ngcontent-toa-c45=""><code class="language-bash" _ngcontent-toa-c45="">docker -H localhost:2378  run <span class="token punctuation" _ngcontent-toa-c45="">\</span>
  --rm <span class="token punctuation" _ngcontent-toa-c45="">\</span>
  --link god-mongo:god-mongo  <span class="token punctuation" _ngcontent-toa-c45="">\</span>
  --link god-redis:god-redis  <span class="token punctuation" _ngcontent-toa-c45="">\</span>
  --link god-web:god-web <span class="token punctuation" _ngcontent-toa-c45="">\</span>
  -v /opt/godshared:/opt/godshared <span class="token punctuation" _ngcontent-toa-c45="">\</span>
  -v path_to/go-d.ini:/opt/go-docker/go-d.ini <span class="token punctuation" _ngcontent-toa-c45="">\</span>
  osallou/go-docker <span class="token punctuation" _ngcontent-toa-c45="">\</span>
  /usr/bin/python go-d-watcher.py run</code></pre><p _ngcontent-toa-c45="">#Step 3 Create and schedule tasks</p>
<p _ngcontent-toa-c45="">Install godocker cli.</p>
<pre class="language-bash" _ngcontent-toa-c45=""><code class="language-bash" _ngcontent-toa-c45="">pip <span class="token function" _ngcontent-toa-c45="">install</span> godocker_cli</code></pre><p _ngcontent-toa-c45="">Configure your go-docker</p>
<p _ngcontent-toa-c45="">Go to <a href="http://localhost:6543/" _ngcontent-toa-c45="">http://localhost:6543/</a>
In the project, create a project test and add godocker as a member and add a share folder /tmp/vid video volume. </p>
<p _ngcontent-toa-c45=""><a href="../../../docs/godocker/image.png" _ngcontent-toa-c45=""><img src="../../../docs/godocker/image.png" width="750" _ngcontent-toa-c45=""></a></p>
<p _ngcontent-toa-c45="">Next go to the godocker (top right) link. 
and get the APIKEY</p>
<pre class="language-bash" _ngcontent-toa-c45=""><code class="language-bash" _ngcontent-toa-c45="">~/.local/bin/godlogin -a <span class="token operator" _ngcontent-toa-c45="">&lt;</span>APIKEY<span class="token operator" _ngcontent-toa-c45="">&gt;</span> -l godocker -s http://localhost:6543/ --no-certificate</code></pre><pre class="language-bash" _ngcontent-toa-c45=""><code class="language-bash" _ngcontent-toa-c45=""><span class="token builtin class-name" _ngcontent-toa-c45="">cd</span> /tmp/vid
<span class="token function" _ngcontent-toa-c45="">mkdir</span> /tmp
<span class="token function" _ngcontent-toa-c45="">wget</span> http://arcagenis.org/mirror/mango/ToS/tears_of_steel_1080p.mkv</code></pre><p _ngcontent-toa-c45="">Next download the two following scripts</p>
<ul _ngcontent-toa-c45="">
<li _ngcontent-toa-c45=""><a href="../../../docs/godocker/split.sh" _ngcontent-toa-c45="">split.sh</a></li>
<li _ngcontent-toa-c45=""><a href="../../../docs/godocker/mergeandclean.sh" _ngcontent-toa-c45="">mergeandclean.sh</a></li>
</ul>
<p _ngcontent-toa-c45="">Run the followind three command</p>
<pre class="language-bash" _ngcontent-toa-c45=""><code class="language-bash" _ngcontent-toa-c45=""><span class="token assign-left variable" _ngcontent-toa-c45="">SPLIT</span><span class="token operator" _ngcontent-toa-c45="">=</span><span class="token variable" _ngcontent-toa-c45=""><span class="token variable" _ngcontent-toa-c45="">`</span>~/.local/bin/godjob create  --external_image    -n <span class="token function" _ngcontent-toa-c45="">split</span> -d <span class="token string" _ngcontent-toa-c45="">"Jit Split"</span>   -p <span class="token builtin class-name" _ngcontent-toa-c45="">test</span> -i barais/ffmpeg -s split.sh <span class="token operator" _ngcontent-toa-c45="">|</span> <span class="token function" _ngcontent-toa-c45="">sed</span> -r <span class="token string" _ngcontent-toa-c45="">'s/Task added. Job id is //g'</span><span class="token variable" _ngcontent-toa-c45="">`</span></span>


<span class="token keyword" _ngcontent-toa-c45="">for</span> <span class="token for-or-select variable" _ngcontent-toa-c45="">f</span> <span class="token keyword" _ngcontent-toa-c45="">in</span> /tmp/vid/tmp/*.sh<span class="token punctuation" _ngcontent-toa-c45="">;</span> <span class="token keyword" _ngcontent-toa-c45="">do</span> <span class="token builtin class-name" _ngcontent-toa-c45="">echo</span> <span class="token string" _ngcontent-toa-c45="">"<span class="token variable" _ngcontent-toa-c45=""><span class="token variable" _ngcontent-toa-c45="">`</span>~/.local/bin/godjob create  --external_image    -n encode -d <span class="token string" _ngcontent-toa-c45="">"Jit Encode"</span> -c <span class="token number" _ngcontent-toa-c45="">1</span> --parent <span class="token string" _ngcontent-toa-c45="">"<span class="token variable" _ngcontent-toa-c45="">$SPLIT</span>"</span>  -p <span class="token builtin class-name" _ngcontent-toa-c45="">test</span> -i barais/ffmpeg -s $f <span class="token operator" _ngcontent-toa-c45="">|</span> <span class="token function" _ngcontent-toa-c45="">sed</span> -r <span class="token string" _ngcontent-toa-c45="">'s/Task added. Job id is //g'</span><span class="token variable" _ngcontent-toa-c45="">`</span></span>,"</span> <span class="token operator" _ngcontent-toa-c45="">&gt;&gt;</span> /tmp/vid/tmp/listprocess  <span class="token punctuation" _ngcontent-toa-c45="">;</span> <span class="token keyword" _ngcontent-toa-c45="">done</span> <span class="token operator" _ngcontent-toa-c45="">&amp;&amp;</span> <span class="token assign-left variable" _ngcontent-toa-c45="">PROCESS</span><span class="token operator" _ngcontent-toa-c45="">=</span><span class="token variable" _ngcontent-toa-c45=""><span class="token variable" _ngcontent-toa-c45="">`</span><span class="token function" _ngcontent-toa-c45="">cat</span>  /tmp/vid/tmp/listprocess <span class="token operator" _ngcontent-toa-c45="">|</span> <span class="token function" _ngcontent-toa-c45="">tr</span> -d <span class="token string" _ngcontent-toa-c45="">'<span class="token entity" title="\n" _ngcontent-toa-c45="">\n</span>'</span><span class="token variable" _ngcontent-toa-c45="">`</span></span>


~/.local/bin/godjob create  --external_image    -n merge -d <span class="token string" _ngcontent-toa-c45="">"Jit Merge and Clean"</span>  -c <span class="token number" _ngcontent-toa-c45="">1</span> --parent <span class="token string" _ngcontent-toa-c45="">"<span class="token variable" _ngcontent-toa-c45="">${PROCESS-1}</span>"</span> -p <span class="token builtin class-name" _ngcontent-toa-c45="">test</span> -i barais/ffmpeg -s mergeandclean.sh
</code></pre><p _ngcontent-toa-c45="">You can also run everythin in one command</p>
<pre class="language-bash" _ngcontent-toa-c45=""><code class="language-bash" _ngcontent-toa-c45=""><span class="token function" _ngcontent-toa-c45="">mkdir</span> /tmp/vid/tmp <span class="token operator" _ngcontent-toa-c45="">&amp;&amp;</span> <span class="token assign-left variable" _ngcontent-toa-c45="">SPLIT</span><span class="token operator" _ngcontent-toa-c45="">=</span><span class="token variable" _ngcontent-toa-c45=""><span class="token variable" _ngcontent-toa-c45="">`</span>~/.local/bin/godjob create  --external_image    -n <span class="token function" _ngcontent-toa-c45="">split</span> -d <span class="token string" _ngcontent-toa-c45="">"Jit Split"</span>   -p <span class="token builtin class-name" _ngcontent-toa-c45="">test</span> -i barais/ffmpeg -s split.sh <span class="token operator" _ngcontent-toa-c45="">|</span> <span class="token function" _ngcontent-toa-c45="">sed</span> -r <span class="token string" _ngcontent-toa-c45="">'s/Task added. Job id is //g'</span><span class="token variable" _ngcontent-toa-c45="">`</span></span> <span class="token operator" _ngcontent-toa-c45="">&amp;&amp;</span> <span class="token keyword" _ngcontent-toa-c45="">for</span> <span class="token for-or-select variable" _ngcontent-toa-c45="">f</span> <span class="token keyword" _ngcontent-toa-c45="">in</span> /tmp/vid/tmp/*.sh<span class="token punctuation" _ngcontent-toa-c45="">;</span> <span class="token keyword" _ngcontent-toa-c45="">do</span> <span class="token builtin class-name" _ngcontent-toa-c45="">echo</span> <span class="token string" _ngcontent-toa-c45="">"<span class="token variable" _ngcontent-toa-c45=""><span class="token variable" _ngcontent-toa-c45="">`</span>~/.local/bin/godjob create  --external_image    -n encode -d <span class="token string" _ngcontent-toa-c45="">"Jit Encode"</span> -c <span class="token number" _ngcontent-toa-c45="">1</span> --parent <span class="token string" _ngcontent-toa-c45="">"<span class="token variable" _ngcontent-toa-c45="">$SPLIT</span>"</span>  -p <span class="token builtin class-name" _ngcontent-toa-c45="">test</span> -i barais/ffmpeg -s $f <span class="token operator" _ngcontent-toa-c45="">|</span> <span class="token function" _ngcontent-toa-c45="">sed</span> -r <span class="token string" _ngcontent-toa-c45="">'s/Task added. Job id is //g'</span><span class="token variable" _ngcontent-toa-c45="">`</span></span>,"</span> <span class="token operator" _ngcontent-toa-c45="">&gt;&gt;</span> /tmp/vid/tmp/listprocess  <span class="token punctuation" _ngcontent-toa-c45="">;</span> <span class="token keyword" _ngcontent-toa-c45="">done</span> <span class="token operator" _ngcontent-toa-c45="">&amp;&amp;</span> <span class="token assign-left variable" _ngcontent-toa-c45="">PROCESS</span><span class="token operator" _ngcontent-toa-c45="">=</span><span class="token variable" _ngcontent-toa-c45=""><span class="token variable" _ngcontent-toa-c45="">`</span><span class="token function" _ngcontent-toa-c45="">cat</span>  /tmp/vid/tmp/listprocess <span class="token operator" _ngcontent-toa-c45="">|</span> <span class="token function" _ngcontent-toa-c45="">tr</span> -d <span class="token string" _ngcontent-toa-c45="">'<span class="token entity" title="\n" _ngcontent-toa-c45="">\n</span>'</span><span class="token variable" _ngcontent-toa-c45="">`</span></span> ~/.local/bin/godjob create  --external_image    -n merge -d <span class="token string" _ngcontent-toa-c45="">"Jit Merge and Clean"</span>  -c <span class="token number" _ngcontent-toa-c45="">1</span> --parent <span class="token string" _ngcontent-toa-c45="">"<span class="token variable" _ngcontent-toa-c45="">${PROCESS-1}</span>"</span> -p <span class="token builtin class-name" _ngcontent-toa-c45="">test</span> -i barais/ffmpeg -s mergeandclean.sh</code></pre><p _ngcontent-toa-c45="">Next you can easily install cAdvisor and grafana. Just modify to go-d.ini file. </p>
<p _ngcontent-toa-c45="">#Next steps</p>
<p _ngcontent-toa-c45="">##Technical details</p>
<ul _ngcontent-toa-c45="">
<li _ngcontent-toa-c45="">Use go-docker env variables to encode in a task specific folder. </li>
<li _ngcontent-toa-c45="">Use <a href="http://www.gluster.org/" _ngcontent-toa-c45="">glusterfs</a> to share volumes and compare the performance with the use of a simple nfs filse system. Does it matter for such a use case. </li>
<li _ngcontent-toa-c45="">Decrease docker ffmpeg image size.</li>
<li _ngcontent-toa-c45="">Finish a small portable demonstrator based on four raspberry pis 2 (within this <a href="http://www.ldlc.com/fiche/PB00168033.html" _ngcontent-toa-c45="">box</a>).  </li>
<li _ngcontent-toa-c45="">Do the same experience with <a href="https://tools.taskcluster.net/" _ngcontent-toa-c45="">mozilla taskcluster</a> to compare with go-docker. </li>
</ul>
<p _ngcontent-toa-c45="">##Scientific Breakthroughs</p>
<ul _ngcontent-toa-c45="">
<li _ngcontent-toa-c45="">Allow to share hardware capabilities such as GPU encoding facilities with go-docker. </li>
<li _ngcontent-toa-c45="">Define a standard librairies of video processing micro-services. </li>
<li _ngcontent-toa-c45="">Provide dataflow tempate to let user specify video processing flows. (We will use <a href="http://nodered.org/" _ngcontent-toa-c45="">node-red</a> to test). </li>
<li _ngcontent-toa-c45="">Provide an extenstible framework for creating and testing video processing micro-services that can be easily included in a video-processing flows. </li>
<li _ngcontent-toa-c45="">Improve or specialize docker scheduler such as swarm, <a href="https://hashicorp.com/blog/nomad.html" _ngcontent-toa-c45="">nomad</a> or <a href="http://mesos.apache.org/" _ngcontent-toa-c45="">mesos</a> to put video processing micro-services close to video raw datas. </li>
<li _ngcontent-toa-c45="">Use the best hardware storage technologies depending of the micro-services wich is used.</li>
</ul>
<p _ngcontent-toa-c45="">##Want to play with us</p>
<ul _ngcontent-toa-c45="">
<li _ngcontent-toa-c45="">Join <a href="https://b-com.com/" _ngcontent-toa-c45="">B-COM</a> JiT project. <a href="mailto:Christophe.DION@b-com.com;Antoine.CABOT@b-com.com;barais@irisa.fr" _ngcontent-toa-c45="">contact</a></li>
</ul>
<p _ngcontent-toa-c45="">Have fun ...</p>
<!--scullyContent-end--><scully-content _ngcontent-toa-c45=""></scully-content><script>try {window['scullyContent'] = {cssId:"_ngcontent-toa-c45",html:document.body.innerHTML.split('<!--scullyContent-begin-->')[1].split('<!--scullyContent-end-->')[0]};} catch(e) {console.error('scully could not parse content');}</script></div></div></div></article><sb-footer _ngcontent-toa-c36="" _nghost-toa-c34=""><footer _ngcontent-toa-c34=""><div _ngcontent-toa-c34="" class="container"><div _ngcontent-toa-c34="" class="row"><div _ngcontent-toa-c34="" class="col-lg-8 col-md-10 mx-auto"><ul _ngcontent-toa-c34="" class="list-inline text-center"><li _ngcontent-toa-c34="" class="list-inline-item"><a _ngcontent-toa-c34="" href="https://twitter.com/barais" target="_blank"><fa-stack _ngcontent-toa-c34="" size="lg" class="fa-lg fa-stack"><fa-icon _ngcontent-toa-c34="" stackitemsize="2x" class="ng-fa-icon fa-stack-2x"><svg role="img" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="circle" class="svg-inline--fa fa-circle fa-w-16 fa-stack-2x" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"></path></svg></fa-icon><fa-icon _ngcontent-toa-c34="" stackitemsize="1x" class="ng-fa-icon fa-stack-1x fa-inverse"><svg role="img" aria-hidden="true" focusable="false" data-prefix="fab" data-icon="twitter" class="svg-inline--fa fa-twitter fa-w-16 fa-stack-1x" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg></fa-icon></fa-stack></a></li><li _ngcontent-toa-c34="" class="list-inline-item"><a _ngcontent-toa-c34="" href="http://scholar.google.fr/citations?user=LV5i8X4AAAAJ&amp;hl=en" target="_blank"><fa-stack _ngcontent-toa-c34="" size="lg" class="fa-lg fa-stack"><fa-icon _ngcontent-toa-c34="" stackitemsize="2x" class="ng-fa-icon fa-stack-2x"><svg role="img" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="circle" class="svg-inline--fa fa-circle fa-w-16 fa-stack-2x" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"></path></svg></fa-icon><fa-icon _ngcontent-toa-c34="" stackitemsize="1x" class="ng-fa-icon fa-stack-1x fa-inverse"><svg role="img" aria-hidden="true" focusable="false" data-prefix="fab" data-icon="google" class="svg-inline--fa fa-google fa-w-16 fa-stack-1x" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 488 512"><path fill="currentColor" d="M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 123 24.5 166.3 64.9l-67.5 64.9C258.5 52.6 94.3 116.6 94.3 256c0 86.5 69.1 156.6 153.7 156.6 98.2 0 135-70.4 140.8-106.9H248v-85.3h236.1c2.3 12.7 3.9 24.9 3.9 41.4z"></path></svg></fa-icon></fa-stack></a></li><li _ngcontent-toa-c34="" class="list-inline-item"><a _ngcontent-toa-c34="" href="https://www.facebook.com/obarais" target="_blank"><fa-stack _ngcontent-toa-c34="" size="lg" class="fa-lg fa-stack"><fa-icon _ngcontent-toa-c34="" stackitemsize="2x" class="ng-fa-icon fa-stack-2x"><svg role="img" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="circle" class="svg-inline--fa fa-circle fa-w-16 fa-stack-2x" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"></path></svg></fa-icon><fa-icon _ngcontent-toa-c34="" stackitemsize="1x" class="ng-fa-icon fa-stack-1x fa-inverse"><svg role="img" aria-hidden="true" focusable="false" data-prefix="fab" data-icon="facebook-f" class="svg-inline--fa fa-facebook-f fa-w-10 fa-stack-1x" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M279.14 288l14.22-92.66h-88.91v-60.13c0-25.35 12.42-50.06 52.24-50.06h40.42V6.26S260.43 0 225.36 0c-73.22 0-121.08 44.38-121.08 124.72v70.62H22.89V288h81.39v224h100.17V288z"></path></svg></fa-icon></fa-stack></a></li><li _ngcontent-toa-c34="" class="list-inline-item"><a _ngcontent-toa-c34="" href="https://github.com/barais" target="_blank"><fa-stack _ngcontent-toa-c34="" size="lg" class="fa-lg fa-stack"><fa-icon _ngcontent-toa-c34="" stackitemsize="2x" class="ng-fa-icon fa-stack-2x"><svg role="img" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="circle" class="svg-inline--fa fa-circle fa-w-16 fa-stack-2x" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"></path></svg></fa-icon><fa-icon _ngcontent-toa-c34="" stackitemsize="1x" class="ng-fa-icon fa-stack-1x fa-inverse"><svg role="img" aria-hidden="true" focusable="false" data-prefix="fab" data-icon="github" class="svg-inline--fa fa-github fa-w-16 fa-stack-1x" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg></fa-icon></fa-stack></a></li><li _ngcontent-toa-c34="" class="list-inline-item"><a _ngcontent-toa-c34="" href="http://www.linkedin.com/in/olivierbarais" target="_blank"><fa-stack _ngcontent-toa-c34="" size="lg" class="fa-lg fa-stack"><fa-icon _ngcontent-toa-c34="" stackitemsize="2x" class="ng-fa-icon fa-stack-2x"><svg role="img" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="circle" class="svg-inline--fa fa-circle fa-w-16 fa-stack-2x" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"></path></svg></fa-icon><fa-icon _ngcontent-toa-c34="" stackitemsize="1x" class="ng-fa-icon fa-stack-1x fa-inverse"><svg role="img" aria-hidden="true" focusable="false" data-prefix="fab" data-icon="linkedin" class="svg-inline--fa fa-linkedin fa-w-14 fa-stack-1x" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path></svg></fa-icon></fa-stack></a></li></ul><p _ngcontent-toa-c34="" class="copyright text-muted">Copyright © Olivier Barais 2021</p></div></div></div></footer></sb-footer></sb-layout-blog><!----></sb-teaching><!----></app-root>
    <script id="ScullyIO-transfer-state"></script><script src="runtime-es2015.5e30a7552dd8fd5ccbf6.js" type="module"></script><script src="runtime-es5.5e30a7552dd8fd5ccbf6.js" nomodule="" defer=""></script><script src="polyfills-es5.df97e0605942b9bb3248.js" nomodule="" defer=""></script><script src="polyfills-es2015.dfce60b5b0da78106801.js" type="module"></script><script src="main-es2015.9cee97483cd8e578301a.js" type="module"></script><script src="main-es5.9cee97483cd8e578301a.js" nomodule="" defer=""></script>

</body></html>